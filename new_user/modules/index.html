<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://crcresearch.github.io/ndcmsT3/new_user/modules/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Modules - CMS Tier 3 at University of Notre Dame</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Modules";
        var mkdocs_page_input_path = "new_user/modules.md";
        var mkdocs_page_url = "/ndcmsT3/new_user/modules/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../images/crc_logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">HOME</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">NEW USER INFO</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../obtain_account/">Obtaining a CRC account</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quick_start/">Quick Start Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../connecting_to_crc/">Connecting to CRC Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../linux_guide/">Basic Linux Guide</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Modules</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#module-command">Module Command</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#searching-modules">Searching Modules</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#module-categories">Module Categories</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#using-modules">Using Modules</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#getting-information-about-a-module">Getting information about a module</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#user-created-modules">User Created Modules</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#creating-a-private-module">Creating a Private Module</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#what-if-my-software-is-a-precompiled-binary">What if my Software is a precompiled Binary?</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#using-private-modules">Using Private Modules</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#different-versions-of-software">Different Versions of Software</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#considerations">Considerations</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../introductory_videos/">Introductory Videos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../training/">Training Events</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">HELP</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../help/faq/">FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../help/help/">Getting Help</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">CRC INFRASTRUCTURE</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../crc_infra/resources/">CRC Resources</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../crc_infra/software/">CRC Software</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../crc_infra/available_hardware/">Available Hardware</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../crc_infra/storage/">Storage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../crc_infra/crc_uge_env/">UGE Environment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../crc_infra/faculty_infrastructure/">Faculty Cluster Partnership Program</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../crc_infra/landing/">Maintenance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RESOURCES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../resources/gpu/">GPU</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../resources/condor/">HTCondor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../resources/globus/">Globus</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../resources/ndcms/">NDCMS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../resources/singularity/">Apptainer/Singularity</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../resources/caml/">CAML</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">POPULAR MODULES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../modules/matlab/">Matlab</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../modules/python/">Python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../modules/r/">R</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../modules/tensorflow/">Tensorflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../modules/conda/">Conda</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">CMS Tier 3 at University of Notre Dame</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">NEW USER INFO</li>
      <li class="breadcrumb-item active">Modules</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/crcresearch/ndcmsT3/edit/master/docs/new_user/modules.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="modules">Modules</h1>
<p>Taken from the Modulefile manual page, "A typical modulefile is a simple bit of code that sets or adds entries to the PATH, MANPATH, or other environment variables." A Module is simply a way to easily organize and handle different pieces of software and different versions of the same software. This allows multiple versions of a popular package like Python to be available on the same system.</p>
<p>Looking to create your own modules? See <code>User Modules</code> for instructions.</p>
<hr />
<h2 id="module-command">Module Command</h2>
<p>While using CRC systems, software which is not included within a standard install of Red Hat Enterprise Linux must be loaded through a module. Matlab for example, cannot be ran on a front end or compute node within the CRC without first loading the matlab module.</p>
<pre class="highlight"><code class="language-shell">matlab
matlab: command not found</code></pre>
<p>To use matlab, you must use the "module" command first. Running the module command alone will give a list of available options.</p>
<pre class="highlight"><code class="language-shell">module
Modules Release 4.2.4 (2019-04-26)
Usage: module [options] [command] [args ...]

Loading / Unloading commands:
    add | load      modulefile [...]  Load modulefile(s)
    rm | unload     modulefile [...]  Remove modulefile(s)
    purge                             Unload all loaded modulefiles
    reload | refresh                  Unload then load all loaded modulefiles
    switch | swap   [mod1] mod2       Unload mod1 and load mod2

    &lt; continues &gt;</code></pre>
<hr />
<h3 id="searching-modules">Searching Modules</h3>
<p>To see all available modules, type</p>
<pre class="highlight"><code class="language-shell">module avail</code></pre>
<p>To see if a specific module is available, type</p>
<pre class="highlight"><code class="language-shell">module avail XYZ</code></pre>
<p>where XYZ is the name of the software you are searching for.</p>
<hr />
<h3 id="module-categories">Module Categories</h3>
<p>There are different categories in which the Modules are organized:</p>
<ul>
<li>system_modules</li>
<li>deprecated_software</li>
<li>restricted_software</li>
<li>general_software</li>
<li>development_tools_and_libraries.</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Modules within the restricted_software category cannot be used without first receiving permission to access those pieces of software.</p>
<p>The deprecated category contains modules which are out of date or no longer being supported after the next biannual outage. The date of the next biannual outage can be found on the <a href="../../">main page</a> . These modules can still be used, however it is recommended to move your application to a newer version of the deprecated module.</p>
</div>
<hr />
<h2 id="using-modules">Using Modules</h2>
<p>After using "module avail", there will be a list of programs from which you can use. Let's say we need to use matlab, the "load" option to the module command can be used to bring matlab into our environment. Simply type:</p>
<pre class="highlight"><code class="language-shell">module load matlab</code></pre>
<p>Now you have the default matlab loaded and ready to use by just typing</p>
<pre class="highlight"><code class="language-shell">matlab</code></pre>
<p>If you need a specific version of a program and see it listed then you'd enter</p>
<pre class="highlight"><code class="language-shell">module load program_name/x.x</code></pre>
<p>where x.x is the version number.</p>
<p>You can see which modules currently have loaded with</p>
<pre class="highlight"><code class="language-shell">module list</code></pre>
<p>You can also remove modules from your environment that you don't need anymore with</p>
<pre class="highlight"><code class="language-shell">module unload program_name</code></pre>
<p>Note that upon logging in, <strong>by default</strong>, you will not have any modules loaded with the exception of the <code>CRC_default</code> module.</p>
<hr />
<h3 id="getting-information-about-a-module">Getting information about a module</h3>
<p>To see a short description of the software within a module, use the whatis sub-command</p>
<pre class="highlight"><code class="language-shell">module whatis matlab</code></pre>
<p>Some modules may also have a short informational help screen. View it with:</p>
<pre class="highlight"><code class="language-shell">module help matlab</code></pre>
<hr />
<h2 id="user-created-modules">User Created Modules</h2>
<p>There are some cases where a module is desired for software which is installed into local user space. Local modules can coexist with CRC modules and being user space installed software, these modules will not become deprecated and removed over time by CRC administrators. Creating a local or private module can be straightforward once a piece of software is installed into user space.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the rest of these instructions, it is assumed the software a module is intended for is already installed.</p>
</div>
<p>For more information on the module command itself, see <code>Module Command</code>.</p>
<hr />
<h3 id="creating-a-private-module">Creating a Private Module</h3>
<p>Private module files are stored within a directory whose path is prepended or appended to the module commands path. First create a directory where all private module files will be stored:</p>
<pre class="highlight"><code class="language-shell">$ mkdir ~/privatemodules</code></pre>
<p>Next, for each software package a module file is desired, create a directory. For an example, we will create a private module for graphviz. Note that for every software package intended for a module, a directory should be created like this.</p>
<pre class="highlight"><code class="language-shell">$ mkdir ~/privatemodules/graphviz</code></pre>
<p>Now, a module file can be created within the directory above. The module file should be named as the version of the software it is meant to load. Thus, continuing the graphviz example, a module file will be created titled 2.40.1:</p>
<pre class="highlight"><code class="language-shell">$ &lt;your favorite text editor here&gt; ~/privatemodules/graphviz/2.40.1</code></pre>
<p>Nearly anyone of the module files administered by the CRC can be used as a template to create a private module. Below is an example for a private graphviz module file. Graphviz has been compiled locally within user AFS space on CRC systems, for software which is a precompiled binary, see <code>precompiled_binary</code> below:</p>
<pre class="highlight"><code>#%Module
#  --------------------------------------------------------------------------  #

proc ModulesHelp { } {
puts stderr "Graphviz version 2.40.1"
puts stderr "\nGraphviz is open source graph visualization software. It has several main graph layout"
puts stderr "programs. It also has web and interactive graphical interfaces, and auxiliary tools, libraries,"
puts stderr "and language bindings. Graphviz has many useful features for concrete diagrams, such as options for"
puts stderr "colors, fonts, tabular node layouts, line styles, hyperlinks, and custom shapes."
}

if { [ module-info mode load ] } {
puts stderr [ concat "Loaded shampton's version of module " [module-info name] ]
}

set graphviz_path "/afs/crc.nd.edu/user/letter/netid/intended_software"

# Setting paths
prepend-path  PATH              $graphviz_path/bin
prepend-path  LD_LIBRARY_PATH   $graphviz_path/lib
prepend-path  MANPATH           $graphviz_path/share/man

# Cleaning up environment
unset graphviz_path

module-whatis "\nGraphviz is open source graph visualization software."</code></pre>
<p>It is important to use absolute paths while creating module files. As seen above, a module file simply manipulates paths.</p>
<hr />
<h3 id="what-if-my-software-is-a-precompiled-binary">What if my Software is a precompiled Binary?</h3>
<p>A module file for a precompiled binary software package is even easier to create than a module file for software compiled locally. Below is an example of a module file for the Rust programming language compiler and package manager, which typically come as precompiled binaries.</p>
<pre class="highlight"><code class="language-shell">#%Module
#  --------------------------------------------------------------------------  #

proc ModulesHelp { } {
puts stderr "The rust modulefile defines the default system paths"
puts stderr "and environment variables needed to use Rust and"
puts stderr "Cargo, Rust's package manager."
puts stderr "Type \"module load rust\" to load the default version of Rust."
}

if { [ module-info mode load ] } {
puts stderr [ concat "Loaded &lt;your name&gt;'s version of module " [module-info name] ]
}

prepend-path    PATH   /afs/crc.nd.edu/user/letter/netid/path/to/.cargo/bin

module-whatis "Rust is a systems programming language that runs blazingly fast, prevents segfaults, and guarantees thread safety. More information can be found at:\n\t\thttps://doc.rust-lang.org/book/second-edition/index.html"</code></pre>
<hr />
<h3 id="using-private-modules">Using Private Modules</h3>
<p>In order for the module command to find the newly created private modules, the module path must be changed. This can be done with</p>
<pre class="highlight"><code class="language-shell">$ module use -a ~/privatemodules</code></pre>
<p>The above command will only affect the current login shell. In order to always have access to private modules, add the above command to your shell configuration script.</p>
<ul>
<li>For BASH users (new user default as of May 2018), add the above command to the bottom of your ~/.bashrc file</li>
<li>For cshell / tcsh users, add the above command to the bottom of your ~/.cshrc file.</li>
</ul>
<p>Be sure to log out and log back in for the change to occur. Now, you can use the module commands (load, unload, avail, etc) on the private modules.</p>
<hr />
<h3 id="different-versions-of-software">Different Versions of Software</h3>
<p>Just like the CRC, private modules can be created for different versions of the same software. Simply create a new module file named after the version of software it is targeting and be sure the paths within the module file are correct. Thus you may get:</p>
<p>\$ module avail</p>
<pre class="highlight"><code class="language-shell">--------- /afs/crc.nd.edu/user/user/privatemodules ----------
graphviz/2.40.1  rust/1.19.0(default)  rust/1.25.0  sage/8.0</code></pre>
<p>To create a default version of a module, create a .version file within the directory of the module which follows suit to below:</p>
<pre class="highlight"><code class="language-shell">#%Module
set ModulesVersion "1.19.0"</code></pre>
<hr />
<h3 id="considerations">Considerations</h3>
<p>When using module commands, the operation will occur to the first occurrence of the module the command finds. Thus, it may be a good idea to name a module something different from the CRC system modules.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../linux_guide/" class="btn btn-neutral float-left" title="Basic Linux Guide"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../introductory_videos/" class="btn btn-neutral float-right" title="Introductory Videos">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/crcresearch/ndcmsT3" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../linux_guide/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../introductory_videos/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
